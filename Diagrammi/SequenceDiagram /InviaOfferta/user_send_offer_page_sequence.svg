<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="878px" preserveAspectRatio="none" style="width:1144px;height:878px;background:#FFFFFF;" version="1.1" viewBox="0 0 1144 878" width="1144px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="539.125" style="stroke:#000000;stroke-width:1.5;" width="1117" x="10" y="241.8281"/><rect fill="none" height="219.9297" style="stroke:#000000;stroke-width:1.5;" width="887" x="230" y="554.0234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="81.2969" y2="797.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="315" x2="315" y1="81.2969" y2="797.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="530" x2="530" y1="81.2969" y2="797.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="629" x2="629" y1="81.2969" y2="797.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="752" x2="752" y1="81.2969" y2="797.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="904" x2="904" y1="81.2969" y2="797.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1044" x2="1044" y1="81.2969" y2="797.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="77.9951">User</text><ellipse cx="39" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,21.5 L39,48.5 M26,29.5 L52,29.5 M39,48.5 L26,63.5 M39,48.5 L52,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="809.9482">User</text><ellipse cx="39" cy="821.75" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,829.75 L39,856.75 M26,837.75 L52,837.75 M39,856.75 L26,871.75 M39,856.75 L52,871.75 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="240" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="247" y="69.9951">UserSendOfferPage</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="240" y="796.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="247" y="816.9482">UserSendOfferPage</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="479" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="486" y="69.9951">AuthProvider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="479" y="796.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="486" y="816.9482">AuthProvider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="591" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="598" y="69.9951">Proposta</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="591" y="796.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="598" y="816.9482">Proposta</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="677" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="684" y="69.9951">PropostaRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="677" y="796.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="684" y="816.9482">PropostaRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="837" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="844" y="69.9951">NavigationService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="837" y="796.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="844" y="816.9482">NavigationService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="982" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="989" y="69.9951">CupertinoDialog</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="982" y="796.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="989" y="816.9482">CupertinoDialog</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1137" x="0" y="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1137" y1="111.8633" y2="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1137" y1="114.8633" y2="114.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="164" x="486.5" y="101.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145" x="492.5" y="117.3638">Inserimento Offerta</text><polygon fill="#181818" points="303,151.5625,313,155.5625,303,159.5625,307,155.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="309" y1="155.5625" y2="155.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="46" y="150.4966">Inserisce prezzo e preme "Invia Offerta"</text><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="357" y1="184.6953" y2="184.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="357" y1="184.6953" y2="197.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="357" y1="197.6953" y2="197.6953"/><polygon fill="#181818" points="326,193.6953,316,197.6953,326,201.6953,322,197.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="322" y="179.6294">_formKey.validate()</text><polygon fill="#181818" points="518,222.8281,528,226.8281,518,230.8281,522,226.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="524" y1="226.8281" y2="226.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="322" y="221.7622">currentUser</text><path d="M10,241.8281 L74,241.8281 L74,248.9609 L64,258.9609 L10,258.9609 L10,241.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="539.125" style="stroke:#000000;stroke-width:1.5;" width="1117" x="10" y="241.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="254.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89" x="89" y="254.0386">[User == null]</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315" x2="357" y1="280.0938" y2="280.0938"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="357" y1="280.0938" y2="293.0938"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316" x2="357" y1="293.0938" y2="293.0938"/><polygon fill="#181818" points="326,289.0938,316,293.0938,326,297.0938,322,293.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="322" y="275.0278">return</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1127" y1="302.0938" y2="302.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="357" y1="324.2266" y2="324.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="357" y1="324.2266" y2="337.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="357" y1="337.2266" y2="337.2266"/><polygon fill="#181818" points="326,333.2266,316,337.2266,326,341.2266,322,337.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="322" y="319.1606">setState(_isSubmitting = true)</text><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="357" y1="366.3594" y2="366.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="357" y1="366.3594" y2="379.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="357" y1="379.3594" y2="379.3594"/><polygon fill="#181818" points="326,375.3594,316,379.3594,326,383.3594,322,379.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="322" y="361.2935">Format prezzo</text><polygon fill="#181818" points="1032.5,404.4922,1042.5,408.4922,1032.5,412.4922,1036.5,408.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="1038.5" y1="408.4922" y2="408.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="322" y="403.4263">showCupertinoDialog(...)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1137" x="0" y="437.0586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1137" y1="437.0586" y2="437.0586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1137" y1="440.0586" y2="440.0586"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="167" x="485" y="426.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="148" x="491" y="442.5591">Conferma da Dialog</text><polygon fill="#181818" points="1032.5,476.7578,1042.5,480.7578,1032.5,484.7578,1036.5,480.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="1038.5" y1="480.7578" y2="480.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="46" y="475.6919">Conferma invio</text><polygon fill="#181818" points="326,505.8906,316,509.8906,326,513.8906,322,509.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="320" x2="1043.5" y1="509.8906" y2="509.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="332" y="504.8247">pop()</text><polygon fill="#181818" points="518,535.0234,528,539.0234,518,543.0234,522,539.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="524" y1="539.0234" y2="539.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="322" y="533.9575">currentUser</text><path d="M230,554.0234 L294,554.0234 L294,561.1563 L284,571.1563 L230,571.1563 L230,554.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="219.9297" style="stroke:#000000;stroke-width:1.5;" width="887" x="230" y="554.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="245" y="567.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89" x="309" y="566.2339">[User == null]</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315" x2="357" y1="592.2891" y2="592.2891"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="357" y1="592.2891" y2="605.2891"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316" x2="357" y1="605.2891" y2="605.2891"/><polygon fill="#181818" points="326,601.2891,316,605.2891,326,609.2891,322,605.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="322" y="587.2231">setState(_isSubmitting = false)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230" x2="1117" y1="614.2891" y2="614.2891"/><polygon fill="#181818" points="617,632.4219,627,636.4219,617,640.4219,621,636.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="623" y1="636.4219" y2="636.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="322" y="631.356">Crea istanza Proposta</text><polygon fill="#181818" points="740,661.5547,750,665.5547,740,669.5547,744,665.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="746" y1="665.5547" y2="665.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="322" y="660.4888">inviaProposta(proposta)</text><polygon fill="#181818" points="326,690.6875,316,694.6875,326,698.6875,322,694.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="320" x2="751" y1="694.6875" y2="694.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="332" y="689.6216">result string</text><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="357" y1="723.8203" y2="723.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="357" y1="723.8203" y2="736.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="316" x2="357" y1="736.8203" y2="736.8203"/><polygon fill="#181818" points="326,732.8203,316,736.8203,326,740.8203,322,736.8203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="322" y="718.7544">setState(_isSubmitting = false)</text><polygon fill="#181818" points="1032.5,761.9531,1042.5,765.9531,1032.5,769.9531,1036.5,765.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="1038.5" y1="765.9531" y2="765.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="322" y="760.8872">showCupertinoDialog(result)</text><!--MD5=[59dcb4e83840a60bb3954e2bc596ffcc]
@startuml
actor User
participant "UserSendOfferPage" as UI
participant "AuthProvider" as Auth
participant "Proposta" as PropostaModel
participant "PropostaRepository" as Repository
participant "NavigationService" as Navigation
participant "CupertinoDialog" as Dialog

== Inserimento Offerta ==
User -> UI : Inserisce prezzo e preme "Invia Offerta"
UI -> UI : _formKey.validate()
UI -> Auth : currentUser

alt User == null
    UI - -> UI : return
else
    UI -> UI : setState(_isSubmitting = true)
    UI -> UI : Format prezzo
    UI -> Dialog : showCupertinoDialog(...)

    == Conferma da Dialog ==
    User -> Dialog : Conferma invio
    Dialog -> UI : pop()
    UI -> Auth : currentUser

    alt User == null
        UI - -> UI : setState(_isSubmitting = false)
    else
        UI -> PropostaModel : Crea istanza Proposta
        UI -> Repository : inviaProposta(proposta)
        Repository - -> UI : result string
        UI -> UI : setState(_isSubmitting = false)
        UI -> Dialog : showCupertinoDialog(result)
    end
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>